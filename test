#!/bin/bash

# Stop on error
set -e

dfx stop
dfx killall
dfx start --background --clean --artificial-delay 0

echo "ðŸš€ Starting test deployment..."

# Build and deploy all canisters
echo "ðŸ“¦ Building and deploying all canisters..."
dfx deploy vault
dfx deploy vault_test

# Run the tests
echo "ðŸ§ª Running tests..."
dfx canister call vault_test runAllTests

# Clean up
echo "ðŸ§¹ Cleaning up..."
dfx stop

echo "âœ… Tests completed!" 